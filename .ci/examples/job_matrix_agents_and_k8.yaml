---
job: baremetal

registry_host: harbor.mellanox.com
registry_path: /swx-storage/ci-demo
registry_auth: swx-storage

kubernetes:
  cloud: swx-k8s-spray

runs_on_dockers:
  - {name: 'blackduck', url: 'harbor.mellanox.com/toolbox/ngci-centos:7.9.2009', arch: 'x86_64'}

runs_on_agents:
  - nodeLabel: '(dockerserver || docker) && x86_64'
  - nodeLabel: 'hpc-test-node-inbox'

steps:

- name: step1
  run: |
    hostname

- name: step2
  run: |
    env

- name: run once on agent and no limit on containers
  agentSelector: "{nodeLabel: 'hpc-test-node-inbox'}"
  run: |
    ls
