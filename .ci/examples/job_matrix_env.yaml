---
job: baremetal

kubernetes:
  cloud: swx-k8s-spray

registry_host: harbor.mellanox.com
registry_path: /swx-storage/ci-demo
registry_auth: swx-storage

env:
  cidemo_var1: '777'
  cidemo_var2: '$cidemo_var1-888'
  cidemo_var3: '$cidemo_var2-999'
  cidemo_mydir: '$WORKSPACE'
  blackduck_url: 'harbor.mellanox.com/toolbox/ngci-centos:7.9.2009'

runs_on_dockers:
  - {name: 'blackduck', url: '$blackduck_url', arch: 'x86_64'}

runs_on_agents:
  - nodeLabel: '(dockerserver || docker) && x86_64'
  - nodeLabel: 'hpc-test-node-inbox'

steps:

- name: step1
  run: |
    hostname
    env|grep ci_demo

- name: step2
  run: |
    env

- name: run once
  agentSelector: "{nodeLabel: 'hpc-test-node-inbox'}"
  run: |
    env|grep ci_demo
